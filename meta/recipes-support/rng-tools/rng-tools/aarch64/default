# With the default jitter options Arm CPU-based devices typically experience
# continuous high CPU utilisation for several minutes after rngd starts.
# See https://gitlab.alpinelinux.org/alpine/aports/-/issues/13035 and
# https://github.com/nhorman/rng-tools/issues/150
# In order to address this the following configuration changes have been made:
#
#   - reduce the number of threads used to 1 in total, rather than 1 per core.
#   - reduce the buffer size from 16535 to 4133 which reduces the time taken
#     to fill the buffer (and so reduces the duration of CPU load).
#
EXTRA_ARGS="-r /dev/hwrng -O jitter:buffer_size:4133 -O jitter:refill_thresh:4133 -O jitter:thread_count:1"
